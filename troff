#!/usr/bin/python3

import sys
import xml.sax.saxutils

import tenorsax.sources.troff.parse
import tenorsax.filters.xslt

writer = xml.sax.saxutils.XMLGenerator(encoding="UTF-8")
if len(sys.argv) > 1:
    f = tenorsax.filters.xslt.XSLTTransformer(writer, sys.argv[1])
else:
    f = writer
p = tenorsax.sources.troff.parse.Parser(f)
p.parse("".join(sys.stdin))
